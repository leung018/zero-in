name: Mobile Submit

on:
    pull_request:
        paths:
            - "apps/mobile/**"
            - "packages/shared/**"
            - ".github/workflows/mobile-submit.yml"
defaults:
    run:
        working-directory: apps/mobile
jobs:
    mobile-submit-android:
        runs-on: ubuntu-latest
        env:
            EXPO_TOKEN: ${{ secrets.EXPO_TOKEN }}
        steps:
            - uses: actions/checkout@v4
            - name: Use Node.js
              uses: actions/setup-node@v4
              with:
                  node-version: "22.x"
                  cache: "yarn"
                  cache-dependency-path: yarn.lock
            - run: yarn install --immutable
            - run: yarn cng
            - name: Build and Submit Android
              run: yarn build:android --non-interactive --auto-submit
